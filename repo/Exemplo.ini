[metadata]
name=gcc
version=14.2.0
description=GNU Compiler Collection
category=base
mode=stage2
install_dir=/usr
update_url=https://ftp.gnu.org/gnu/gcc/
update_pattern=gcc-([0-9.]+)\.tar\.xz

[checksums]
sha256sum=abc123...
md5sum=def456...

[sources]
url=https://ftp.gnu.org/gnu/gcc/gcc-14.2.0.tar.xz
url=https://example.com/extra/gcc-patch.tar.gz

[patches]
path=/usr/ports/patches/gcc/
url=https://patches.gnu.org/gcc-fix.patch

[environment]
path=/tools/bin:/usr/bin:/bin
flags=-O2 -pipe
toolchain=true

[functions]
prepare() {
  log_info "Preparando GCC..."
  tar xf ${SOURCE_1} -C build
}

compile() {
  log_info "Compilando GCC..."
  ./configure --prefix=${INSTALL_DIR} --disable-multilib
  make -j$(nproc)
}

check() {
  log_info "Rodando testes GCC..."
  make check
}

install() {
  log_info "Instalando GCC..."
  make install
}
