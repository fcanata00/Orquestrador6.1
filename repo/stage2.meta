# stage2.meta - Construção do sistema básico (Stage 2)
# O Stage 2 usa o toolchain validado do Stage 1 e monta o sistema base GNU.
# Pacotes ordenados cuidadosamente conforme dependências.

order=zlib, file, ncurses, bash, coreutils, diffutils, findutils, gawk, grep, gzip, m4, make, patch, sed, tar, xz, binutils-pass2, gcc-pass2

# --------------------------
# Configuração global do Stage
# As variáveis são exportadas no ambiente chroot
stage.env=PATH=/usr/bin:/bin;MAKEFLAGS=-j$(nproc);LFS=/mnt/lfs;LFS_TGT=$(uname -m)-lfs-linux-gnu

# ========================================================================
# ZLIB
# ========================================================================
zlib.version=1.3.1
zlib.url=https://zlib.net/zlib-1.3.1.tar.xz
zlib.sha256=ee4d7f40990a9fcb9a780bc292ff6c41b7e9a3f3fbbd319e77e2e6df7c5a6d56
zlib.configure_flags=--prefix=/usr
zlib.category=libs

# ========================================================================
# FILE
# ========================================================================
file.version=5.45
file.url=https://astron.com/pub/file/file-5.45.tar.gz
file.sha256=30d89e4742e4c34b94fa883a9bdbb6f7f50e0f89c2e6b0cf4a409bf23de18203
file.configure_flags=--prefix=/usr
file.category=base

# ========================================================================
# NCURSES
# ========================================================================
ncurses.version=6.5
ncurses.url=https://ftp.gnu.org/pub/gnu/ncurses/ncurses-6.5.tar.gz
ncurses.sha256=ab1907a57d2168013c19ac27d2b62274b7f621a8cfb61543d2b455bea0a6c8a3
ncurses.configure_flags=--prefix=/usr --with-shared --without-debug --without-ada --enable-widec
ncurses.category=libs

# ========================================================================
# BASH
# ========================================================================
bash.version=5.2.32
bash.url=https://ftp.gnu.org/gnu/bash/bash-5.2.32.tar.gz
bash.sha256=7adf6a22e7a11c4e23d414d05f6f330bd8037a86db6e4a54047aef3a7f1d1a3e
bash.configure_flags=--prefix=/usr --without-bash-malloc --build=$(./support/config.guess)
bash.category=base

# ========================================================================
# COREUTILS
# ========================================================================
coreutils.version=9.5
coreutils.url=https://ftp.gnu.org/gnu/coreutils/coreutils-9.5.tar.xz
coreutils.sha256=7e79d78425eb6a3b93b8d433bbcd2ecce94219662cd8b5026a7567d31b4b3a82
coreutils.configure_flags=--prefix=/usr --enable-no-install-program=kill,uptime
coreutils.category=base

# ========================================================================
# DIFFUTILS
# ========================================================================
diffutils.version=3.10
diffutils.url=https://ftp.gnu.org/gnu/diffutils/diffutils-3.10.tar.xz
diffutils.sha256=628a5db8e33e66d278e7b5a7d94f0a43d9c888024dc4a6bdb5e8231d0b7f66e3
diffutils.configure_flags=--prefix=/usr
diffutils.category=base

# ========================================================================
# FINDUTILS
# ========================================================================
findutils.version=4.10.0
findutils.url=https://ftp.gnu.org/gnu/findutils/findutils-4.10.0.tar.xz
findutils.sha256=03b5df78af59d6893a51225d1ebcfd7b180353c7a98e0e58d394de8e3a2f0e3f
findutils.configure_flags=--prefix=/usr
findutils.category=base

# ========================================================================
# GAWK
# ========================================================================
gawk.version=5.3.0
gawk.url=https://ftp.gnu.org/gnu/gawk/gawk-5.3.0.tar.xz
gawk.sha256=0b7df5d05d74b2e5d0e3e483c8c10ad595748d63a0db2124c3efb8ff1a0c3b56
gawk.configure_flags=--prefix=/usr
gawk.category=base

# ========================================================================
# GREP
# ========================================================================
grep.version=3.11
grep.url=https://ftp.gnu.org/gnu/grep/grep-3.11.tar.xz
grep.sha256=f118b034f777602d78cddb69e0cc235eb2d7858590df7f3ef6b1c72cc4c92d3a
grep.configure_flags=--prefix=/usr
grep.category=base

# ========================================================================
# GZIP
# ========================================================================
gzip.version=1.13
gzip.url=https://ftp.gnu.org/gnu/gzip/gzip-1.13.tar.xz
gzip.sha256=17b31e4be68a232b2e15f96aef24b9e0cb06272d2f3b785a7973015ec96e89c0
gzip.configure_flags=--prefix=/usr
gzip.category=base

# ========================================================================
# M4
# ========================================================================
m4.version=1.4.19
m4.url=https://ftp.gnu.org/gnu/m4/m4-1.4.19.tar.xz
m4.sha256=89a40691475b72d70f1067485e5cd0f9b5b1e29d003e0e743ffb1e8d30293891
m4.configure_flags=--prefix=/usr
m4.category=base

# ========================================================================
# MAKE
# ========================================================================
make.version=4.4.1
make.url=https://ftp.gnu.org/gnu/make/make-4.4.1.tar.gz
make.sha256=381a9bdbd4c92d02f1b4e3c695d3db5a26cda6c59a0e84efb0a99a2e4b14f72d
make.configure_flags=--prefix=/usr --without-guile
make.category=base

# ========================================================================
# PATCH
# ========================================================================
patch.version=2.7.6
patch.url=https://ftp.gnu.org/gnu/patch/patch-2.7.6.tar.xz
patch.sha256=ac610bda97abe0d3f3f1a55deaa6d0cceac9f3e88a1e9d856f9a9b4034bdfd4e
patch.configure_flags=--prefix=/usr
patch.category=base

# ========================================================================
# SED
# ========================================================================
sed.version=4.9
sed.url=https://ftp.gnu.org/gnu/sed/sed-4.9.tar.xz
sed.sha256=6b718d0b7e4728a7b9df7dc0d3b0c7b5b26b3e0eac46b4e7dd0d0c06fcb7f4f3
sed.configure_flags=--prefix=/usr
sed.category=base

# ========================================================================
# TAR
# ========================================================================
tar.version=1.35
tar.url=https://ftp.gnu.org/gnu/tar/tar-1.35.tar.xz
tar.sha256=74eecb96d5781c5f944a86e1329f9f2ab58cf7f14efbeedc9382a59a0ff63243
tar.configure_flags=--prefix=/usr
tar.category=base

# ========================================================================
# XZ
# ========================================================================
xz.version=5.6.2
xz.url=https://tukaani.org/xz/xz-5.6.2.tar.xz
xz.sha256=80b5cf86e60e0e528cd15e650d4c3ee4a1dfebdbca6e5dfb3d67ebbe3eb7a6d0
xz.configure_flags=--prefix=/usr
xz.category=base

# ========================================================================
# BINUTILS (Pass 2)
# ========================================================================
binutils-pass2.version=2.43.1
binutils-pass2.url=https://ftp.gnu.org/gnu/binutils/binutils-2.43.1.tar.xz
binutils-pass2.sha256=afccffb14b98c870a7ce7d3fce2c2bcb8b1dd6d9c1e79f8dfbc4e7a504ab1845
binutils-pass2.configure_flags=--prefix=/usr --enable-gold=yes --enable-ld=default --enable-plugins --disable-werror
binutils-pass2.category=base

# ========================================================================
# GCC (Pass 2)
# ========================================================================
gcc-pass2.version=14.2.0
gcc-pass2.url=https://ftp.gnu.org/gnu/gcc/gcc-14.2.0/gcc-14.2.0.tar.xz
gcc-pass2.sha256=bf48f0f1ebef667db16d024055e294d9d89d7e99f1b582f5a5270b55f8c46bc9
gcc-pass2.configure_flags=--prefix=/usr --enable-languages=c,c++ --disable-multilib --disable-bootstrap --enable-shared --enable-threads=posix
gcc-pass2.category=base
